<!DOCTYPE html>
<html>
<head>
    <title>POS System</title>
</head>
<body>
    <nav>
        <!--the adming links wont show up unless the user is a staff member or superuser test with a rugarl user -->
        {% if user.is_authenticated %}
            <a href="{% url 'home_page' %}">Home</a>
            {% if user.is_staff %}
                <a href="{% url 'admin_dashboard' %}">Admin Dashboard</a>
                <a href="{% url 'admin:index' %}">Django Admin</a>
            {% endif %}
            <a href="{% url 'logout' %}">Logout</a>
        {% else %}
            <a href="{% url 'login' %}">Login</a>
            <a href="{% url 'register' %}">Register</a>
        {% endif %}
    </nav>

    <main>
        <h2>Inventory Items</h2>
        
        <div>
            <input 
                type="text" 
                id="searchInput" 
                placeholder="Search items..."
                onkeyup="searchTable()"
            >
        </div>

        <table border="1" id="itemTable">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Price</th>
                    <th>Category</th>
                    <th>Stock</th>
                </tr>
            </thead>
            <tbody>
                {% for item in items %}
                    <tr>
                        <td>{{ item.name }}</td>
                        <td>${{ item.cost }}</td>
                        <td>{{ item.tag }}</td>
                        <td>{{ item.amount }}</td>
                    </tr>
                {% empty %}
                    <tr>
                        <td colspan="4">No items found</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </main>

  <!--temporary place for the script i will mobe it soon -->    
    <script>
        function searchTable() {
            let input = document.getElementById("searchInput");
            let filter = input.value.toLowerCase();
            let table = document.getElementById("itemTable");
            let rows = table.getElementsByTagName("tr");

            for (let i = 1; i < rows.length; i++) {
                let show = false;
                let cells = rows[i].getElementsByTagName("td");
                
                for (let cell of cells) {
                    let text = cell.textContent || cell.innerText;
                    if (text.toLowerCase().indexOf(filter) > -1) {
                        show = true;
                        break;
                    }
                }
                
                rows[i].style.display = show ? "" : "none";
            }
        }
    </script>
</body>
</html> 